# VueからReactへの移行計画

## 1. 移行の目的

- **開発効率の向上**: Reactエコシステムへの移行により、より広範なコミュニティサポートと豊富なライブラリを活用し、開発効率を向上させます。
- **将来的な拡張性**: Reactの採用により、将来的な機能拡張や新しい開発者のオンボーディングを容易にします。
- **技術スタックの統一**: 必要に応じて、他のプロジェクトとの技術スタックの統一を図ります。

## 2. 移行戦略

本プロジェクトでは、リスクを最小限に抑え、ユーザーへの影響を軽減するため、**段階的移行**を推奨します。

- **段階的移行**: 既存のVueアプリケーションと新しいReactアプリケーションを共存させながら、徐々にVueコンポーネントをReactコンポーネントに置き換えていきます。
  - VueとReactの共存を可能にするためのビルド設定（Vite）を行います。
  - 新しい機能はReactで開発し、既存のVueコンポーネントを優先度の高いものから順次Reactに移行します。

## 3. 技術スタック

- **フレームワーク**: React
- **言語**: TypeScript (既存プロジェクトに準拠)
- **ビルドツール**: Vite (既存プロジェクトに準拠し、継続利用)
- **状態管理**:
  - 既存のPinia (`src/stores/calculator.ts`) のロジックを、ReactのContext API + `useReducer`、またはZustand/Jotaiなどの軽量な状態管理ライブラリに移行します。プロジェクトの規模を考慮し、これらの軽量な選択肢を推奨します。
- **ルーティング**: 現在のプロジェクトにはルーティングが見当たらないため、必要に応じて検討
- **UIライブラリ**: shadcn/ui

## 4. 移行手順

### フェーズ1: 準備と初期設定

1.  **新しいReact + TypeScriptプロジェクトの作成**:
    - Viteを使用して、新しいReact + TypeScriptプロジェクトをセットアップします。

    ```bash
    pnpm create vite@latest my-react-app -- --template react-ts
    ```

    - 既存のプロジェクトのルートに統合するか、一時的に別のディレクトリで作業します。

2.  **依存関係の移行**:
    - 既存の`package.json`から、Reactプロジェクトで必要となる依存関係を新しい`package.json`に移行します。
3.  **`tsconfig.json`の調整**:
    - Reactプロジェクト用に`tsconfig.json`を調整します。
4.  **`public`ディレクトリの移行**:
    - 既存の`public`ディレクトリの内容（例: `favicon.png`）を新しいReactプロジェクトの`public`ディレクトリにコピーします。
5.  **VueとReactの共存環境の構築 (段階的移行の場合)**:
    - Viteの設定を調整し、VueとReactの両方をバンドルできるようにします。
    - ルートの`index.html`を調整し、VueとReactのエントリポイントを共存させます。
    - 既存のVueアプリケーションのルート要素と、新しいReactアプリケーションのルート要素を定義します。

### フェーズ2: ユーティリティと型定義の移行

1.  **ユーティリティ関数の移行**:
    - `src/utils`ディレクトリ内のTypeScriptファイルをそのままReactプロジェクトにコピーします。
    - Vueのリアクティブシステムに依存する部分があれば、プレーンなTypeScript関数に修正します。
2.  **型定義の移行**:
    - `src/types`ディレクトリ内のTypeScriptファイルをそのままReactプロジェクトにコピーします。

### フェーズ3: 状態管理の移行

1.  **`src/stores/calculator.ts`の移行**:
    - PiniaストアのロジックをReactのContext API + `useReducer`、またはZustand/Jotaiなどの状態管理ライブラリに書き換えます。
    - `calculator.ts`で定義されているインターフェースとロジックを、Reactのフックやコンテキストプロバイダとして再実装します。

### フェーズ4: コンポーネントの移行

1.  **VueコンポーネントのReactコンポーネントへの書き換え**:
    - `src/components`ディレクトリ内のVueコンポーネント (`CalculatorForm.vue`, `CalculatorResult.vue`, `CalculatorTabs.vue`) をReactコンポーネント (`.tsx`ファイル) に書き換えます。
    - `App.vue`を`App.tsx`に書き換えます。
    - **変換のポイント**:
      - Vueのテンプレート構文をReactのJSXに変換します。
      - Vueのリアクティブデータ (`data`, `ref`, `reactive`) をReactの`useState`や`useReducer`に変換します。
      - Vueの算出プロパティ (`computed`) をReactの`useMemo`に変換します。
      - Vueのライフサイクルフック (`mounted`, `updated`など) をReactの`useEffect`に変換します。
      - Vueのイベントハンドリング (`@click`, `v-on`) をReactのイベントハンドリング (`onClick`など) に変換します。
      - PropsとEmitはReactのPropsに変換します。
      - スロットはReactの`children`プロパティやレンダープロップに変換します。
2.  **スタイリングの移行**:
    - `src/style.css`はそのまま利用可能です。
    - Vueコンポーネント内のスコープ付きCSSは、ReactのCSS Modules、Styled Components、またはTailwind CSSなどの採用を検討することも可能ですが、既存のグローバルCSSを維持することも可能です。

### フェーズ5: 最終調整とデプロイ

1.  **Vite設定の最終調整**:
    - Viteの設定を最終的にReactアプリケーション用に調整します。
2.  **CI/CDパイプラインの更新**:
    - 既存のCI/CDパイプライン (`.github/workflows/deploy.yml`) をReactアプリケーションのビルドとデプロイに合わせて更新します。
3.  **最終テスト**:
    - アプリケーション全体の機能テスト、パフォーマンステスト、ブラウザ互換性テストを実施します。

## 5. 考慮事項

- **既存のCSS**: `src/style.css`はそのまま利用可能ですが、コンポーネントの移行時にクラス名が衝突しないように注意が必要です。
- **ユーティリティ関数**: ほとんどがそのまま利用可能ですが、Vueのリアクティブシステムに依存する部分がないか確認し、必要に応じて修正します。
- **パフォーマンス**: Reactの最適化手法（`React.memo`, `useCallback`, `useMemo`など）を適切に適用し、パフォーマンスの低下を防ぎます。
- **SEO/アクセシビリティ**: 移行後も既存のSEOやアクセシビリティが損なわれないように注意し、必要に応じて対策を講じます。

## 6. リスクと課題

- **学習コスト**: 開発チームがVueからReactへの移行に伴う学習コストが発生します。
- **互換性の問題**: 段階的移行の場合、VueとReactの共存時にビルドツールやライブラリの互換性問題が発生する可能性があります。
- **デバッグの複雑さ**: VueとReactが混在する期間は、デバッグが複雑になる可能性があります。
- **時間とリソース**: 移行には相応の時間とリソースが必要となります。
